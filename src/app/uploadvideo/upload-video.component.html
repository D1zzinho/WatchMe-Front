<!--<form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">-->
<!--  <input type="file" class="form-control-file" (change)="onFileSelect($event)" accept="video/mp4" required />-->

<!--  <div class="options">-->
<!--    <input type="text" class="form-control" name="title" formControlName="title" placeholder="Title" maxlength="200" required />-->
<!--    <input type="text" class="form-control" name="desc" formControlName="desc" placeholder="Description" maxlength="300" />-->
<!--    <input type="text" class="form-control" name="tags" formControlName="tags" placeholder="Tags" />-->
<!--  </div>-->


<!--  <button type="submit" class="btn btn-outline-primary" [disabled]="uploadForm.invalid">Upload video</button>-->
<!--</form>-->

<div class="container-fluid">
  <div class="upload-page">
    <div class="form">
      <div class="form-header mb-4">
        <h3>Upload new video</h3>
      </div>

      <div #DRAG_SECTION class="form-body pt-2">
        <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">

          <div class="drop-zone mb-4">
            <span class="drop-zone__prompt">Drop file here or click to upload</span>
            <input type="file" class="drop-zone__input" accept="video/mp4" required />
          </div>

          <div class="text-inputs" style="display: none;" *ngIf="uploadResponse['status'] !== 'progress'">
            <input type="text" class="form-control bg-transparent text-light mb-2" name="title" formControlName="title" placeholder="Video title" maxlength="200" required />
            <textarea class="form-control bg-transparent text-light mb-2" name="desc" formControlName="desc" placeholder="Video description" maxlength="600"></textarea>
            <input type="text" class="form-control bg-transparent text-light mb-2" name="tags" formControlName="tags" placeholder="Video tags" />
            <button type="submit" class="btn btn-outline-primary" [disabled]="uploadForm.invalid">Upload</button>
          </div>

        </form>
      </div>


      <div #ERROR class="alert alert-danger mx-2" *ngIf="error">
        <a href="javascript:void(0)" class="close" (click)="ERROR.style.display = 'none'" aria-label="close">&times;</a>
        <p class="p-0 m-0">{{ error }}</p>
      </div>

      <div #UPLOAD_ERROR class="alert alert-danger mx-2" *ngIf="uploadResponse['status'] === 'error'">
        <a href="javascript:void(0)" class="close" (click)="UPLOAD_ERROR.style.display = 'none'" aria-label="close">&times;</a>
        <p class="p-0 m-0">{{ uploadResponse['message'] }}</p>
      </div>



      <a class="text-left newVideo" *ngIf="uploadResponse['uploaded']" [routerLink]="['/player']" [queryParams]="{vid: uploadResponse['saved'].video._id}">
        <div class="suggestedVideo h-100" [title]="uploadResponse['saved'].video.title">
          <div class="preview">

            <img id="newVideoThumbnail"
              class="img-fluid prev"
              alt="{{ uploadResponse['saved'].video.title }}">

          </div>
          <div class="upload-movie-info">
            <strong style="font-size: 12px; word-break: break-word;">{{ (uploadResponse['saved'].video.title.length > 30 ? uploadResponse['saved'].video.title.slice(0, 30) + '...' : uploadResponse['saved'].video.title) }}</strong>
            <span style="color: rgba(50,170,255,0.8)" title="Views">{{ uploadResponse['saved'].video.visits }}</span>
          </div>
        </div>
      </a>


      <div #SUCCESS class="alert alert-success mx-2 mt-2" *ngIf="uploadResponse['uploaded']">
        <a href="javascript:void(0)" class="close" (click)="SUCCESS.style.display = 'none'" aria-label="close">&times;</a>
        <p class="p-0 m-0">Video <strong>{{ uploadResponse['saved'].video.title }}</strong> successfully uploaded!</p>
      </div>

      <div *ngIf="uploadResponse['status'] === 'progress'" class="progress mx-2">
<!--          <div class="progress-bar" role="progressbar" [style.width]="uploadResponse.message + '%'" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>-->

        <mat-progress-bar [value]="uploadResponse['message']"></mat-progress-bar>

<!--        <div role="progressbar" [ngStyle]="{'width': uploadResponse.message + '%' }" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">-->
<!--          <p class="p-0 m-0">{{ uploadResponse.message }}%</p>-->
<!--        </div>-->
      </div>
    </div>
  </div>
</div>

